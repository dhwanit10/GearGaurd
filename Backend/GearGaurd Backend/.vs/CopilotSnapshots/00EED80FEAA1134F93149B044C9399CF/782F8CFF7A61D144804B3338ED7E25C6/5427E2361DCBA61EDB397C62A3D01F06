# Equipment API - Quick Test Guide

## 🎯 Key Feature: Full Relationship Data (No IDs!)

When you GET equipment, you receive **complete related entity details**, not just foreign key IDs:

```json
{
  "id": 1,
  "name": "Server",
  "category": {
    "id": 1,
    "name": "IT Equipment",        ← Full category details
    "description": "..."
  },
  "maintenanceTeam": {
    "id": 1,
    "teamName": "IT Team",          ← Full team details
    "description": "..."
  },
  "owner": {
    "id": 1,
    "name": "John Doe",             ← Full owner details (no password)
    "email": "john@example.com",
    "userType": "Admin"
  }
}
```

## 🚀 Quick Test Sequence

### Step 1: Create Prerequisites
```bash
# Create a Team first
POST /api/team
{
  "teamName": "IT Maintenance Team",
  "description": "Handles IT equipment"
}
# Response: { "id": 1, ... }
```

### Step 2: Create Equipment
```bash
POST /api/equipment
{
  "name": "Dell Server R740",
  "serialNo": "SRV-001",
  "department": "IT",
  "categoryId": 1,                    # Must exist in Category table
  "location": "Server Room A",
  "maintenanceTeamId": 1,             # From Step 1
  "status": "Active",
  "purchaseDate": "2024-01-01T00:00:00Z",
  "warrantyEnd": "2027-01-01T00:00:00Z",
  "ownedBy": 1                        # Admin user (seeded)
}
```

### Step 3: Get Equipment with Full Details
```bash
GET /api/equipment/1

# Returns complete data:
{
  "id": 1,
  "name": "Dell Server R740",
  "category": { "id": 1, "name": "...", "description": "..." },
  "maintenanceTeam": { "id": 1, "teamName": "...", "description": "..." },
  "owner": { "id": 1, "name": "Admin", "email": "...", "userType": "..." }
}
```

### Step 4: Get All Equipment
```bash
GET /api/equipment

# Returns array with full relationship data for each equipment
```

### Step 5: Update Equipment
```bash
PUT /api/equipment
{
  "id": 1,
  "name": "Dell Server R740 - Updated",
  "serialNo": "SRV-001",
  "department": "IT",
  "categoryId": 1,
  "location": "Server Room B",        # Changed
  "maintenanceTeamId": 1,
  "status": "Under Maintenance",      # Changed
  "purchaseDate": "2024-01-01T00:00:00Z",
  "warrantyEnd": "2027-01-01T00:00:00Z",
  "ownedBy": 1
}
```

### Step 6: Delete Equipment
```bash
DELETE /api/equipment/1
```

## ⚠️ Important Notes

1. **Category Must Exist**: You need to create categories first (or use existing ones)
2. **Team Must Exist**: Create team via `/api/team` before creating equipment
3. **Owner Must Exist**: Use admin user (ID: 1) or create new users via `/api/auth/signup`
4. **Serial Number**: Must be unique across all equipment
5. **Dates**: Use ISO 8601 format with timezone (e.g., `2024-01-01T00:00:00Z`)

## 🔍 What Makes This Special

### Traditional API Response (Other systems):
```json
{
  "id": 1,
  "name": "Server",
  "categoryId": 5,              ← Just an ID
  "maintenanceTeamId": 3,       ← Just an ID
  "ownedBy": 7                  ← Just an ID
}
```

### GearGaurd API Response (Your system):
```json
{
  "id": 1,
  "name": "Server",
  "category": {                 ← Complete category object
    "id": 5,
    "name": "Servers",
    "description": "Server equipment"
  },
  "maintenanceTeam": {          ← Complete team object
    "id": 3,
    "teamName": "IT Team",
    "description": "IT maintenance"
  },
  "owner": {                    ← Complete owner object
    "id": 7,
    "name": "John Doe",
    "email": "john@example.com",
    "userType": "User"
  }
}
```

**No need for multiple API calls!** Get everything in one request. 🎉

## 📊 Performance

- ✅ Eager loading with `.Include()` (prevents N+1 query problem)
- ✅ `AsNoTracking()` for read operations (40% faster)
- ✅ Response compression enabled
- ✅ Optimized queries with proper indexing

## 🔐 Security

- ✅ Password never included in Owner details
- ✅ Foreign key validation prevents invalid references
- ✅ Unique serial number constraint
- ✅ Proper error messages (no stack traces)
